<html>
<head>
<style>
#zonedejeux{background-color:antiquewhite;
			width:900px; height:400px;
			position:absolute; top:3px; left:3px;
			z-index:1;}
h1{position:absolute;top:-7px; left:320px; z-index:2;}
</style>

<script>
//var globale.
var speed = 500;
var width = 900;
var height = 400;
var rayon = 15;
var velocity = 40;

function principale(){

   
	//Ajout d'un écouteur sur les touches
	window.addEventListener('keydown', deplacement, true);
     //Lance la foncction bouger() à interval de "speedd"
	enemy = setInterval(bouger, speed);
    
	
	
}

function bouger(){
    var ballX = parseInt(document.getElementById('ball').getAttribute("cx"));
    var ballY = parseInt(document.getElementById('ball').getAttribute("cy"));

	//Code à créeer pour faire bouger la boule enemy
    var ennemy_ballX = parseInt(document.getElementById('ennemy_ball').getAttribute("cx"));
    var ennemy_ballY = parseInt(document.getElementById('ennemy_ball').getAttribute("cy"));

    
    if (ballY > ennemy_ballY) {
        ennemy_ballY += velocity;
    } else if (ballY < ennemy_ballY) {
        ennemy_ballY -= velocity;

    }
    
    if (ennemy_ballY < 0){
        ennemy_ballY = rayon;
    } 
    if (ennemy_ballY > height){
        ennemy_ballY =  height - rayon;
    }

    if (Math.abs(ballY - ennemy_ballY) < rayon) {
        ennemy_ballY = ballY;
    }
    
    ennemy_ballX-= velocity;
        if (ennemy_ballX <= 15) {
            ennemy_ballX = width - rayon;
            speed /= 2;
        }
    document.getElementById('ennemy_ball').setAttribute("cx",ennemy_ballX);
    document.getElementById('ennemy_ball').setAttribute("cy",ennemy_ballY);
    
	if (Math.abs(ballY - ennemy_ballY) < 2*rayon && Math.abs(ballX - ennemy_ballX) < 2*rayon) {
        alert("Vous avez perdu!");
        return;
    }
}


function deplacement(evt) {
		   var ballX = parseInt(document.getElementById('ball').getAttribute("cx"));
		   var ballY = parseInt(document.getElementById('ball').getAttribute("cy"));
           switch (evt.keyCode) {
                // Gauche 
                case 37:
					ballX -= rayon;
                    if(ballX<rayon){ballX=rayon;}
					document.getElementById('ball').setAttribute("cx", ballX);
					break;
                // Droite 
                case 39:
                    var limit = width - rayon;
                    ballX += rayon;
                    if (ballX > limit) {ballX = limit ;}
                    document.getElementById('ball').setAttribute("cx",ballX);
                    break;

				// Haut 
                case 38:
                    ballY -= 15;
                    if (ballY < rayon){ballY = rayon;}
                    document.getElementById('ball').setAttribute("cy",ballY);
                    break;
				// Bas 
                case 40:
                    var limit = height - rayon;
                    ballY += rayon;
                    if (ballY > limit){ballY = limit;}
                    document.getElementById('ball').setAttribute("cy",ballY);
                    break;


            }

}

	 
</script>
</head>
<body onload="principale()">
	<h1>Jeux Javascript</h1>
	<svg id="zonedejeux">
	<circle cx="450" cy="200" r="15" fill="tomato" id="ball" />
    <circle cx="885" cy="200" r="15" fill="blue" id="ennemy_ball">
	
	</svg>
<body>
</html>
